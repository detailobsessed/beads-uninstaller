default_stages = ["pre-commit"]
# Minimum prek version for builtin hooks and TOML config support
minimum_prek_version = "0.3.2"
# All available: commit-msg, post-checkout, post-commit, post-merge, post-rewrite, pre-commit, pre-merge-commit, pre-push, pre-rebase, prepare-commit-msg
default_install_hook_types = ["commit-msg", "pre-commit", "pre-push"]

[[repos]]
repo = "builtin"
hooks = [
  { id = "trailing-whitespace", priority = 0 },
  { id = "end-of-file-fixer", priority = 0 },
  { id = "check-yaml", args = ["--allow-multiple-documents"], priority = 0 },
  { id = "check-added-large-files", priority = 0 },
  { id = "check-merge-conflict", priority = 0 },
  { id = "check-case-conflict", priority = 0 },
  { id = "check-executables-have-shebangs", priority = 0 },
  { id = "mixed-line-ending", args = ["--fix=lf"], priority = 0 },
  { id = "detect-private-key", priority = 0 },
]

[[repos]]
repo = "https://github.com/gitleaks/gitleaks"
rev = "v8.30.0"
hooks = [{ id = "gitleaks", priority = 1 }]

[[repos]]
repo = "https://github.com/compilerla/conventional-pre-commit"
rev = "v4.3.0"
hooks = [
  { id = "conventional-pre-commit", stages = ["commit-msg"], priority = 1, args = [
    "--strict",
    "--verbose",
    "feat",
    "fix",
    "perf",
    "build",
    "chore",
    "ci",
    "docs",
    "style",
    "refactor",
    "test",
  ] },
]

[[repos]]
repo = "https://github.com/shellcheck-py/shellcheck-py"
rev = "v0.11.0.1"
hooks = [{ id = "shellcheck", exclude = "^(lib/|tests/)", priority = 1 }]

[[repos]]
repo = "https://github.com/crate-ci/typos"
rev = "v1.43.3"
hooks = [{ id = "typos", priority = 1 }]

[[repos]]
repo = "https://github.com/igorshubovych/markdownlint-cli"
rev = "v0.47.0"
hooks = [{ id = "markdownlint", args = ["--fix"], priority = 1 }]

[[repos]]
repo = "local"

[[repos.hooks]]
id = "bashunit"
name = "bashunit tests"
entry = "./lib/bashunit"
language = "system"
types = ["shell"]
pass_filenames = false
stages = ["pre-push"]
priority = 1
